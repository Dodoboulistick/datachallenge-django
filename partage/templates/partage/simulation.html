{% extends "base.html" %}

{% block title %}Simulation{% endblock %}

{% block content %}
<section class="py-20">
    <div class="pb-10 text-center w-3/4 mx-auto">
        <h3 class="text-2xl font-medium text-emerald-400 uppercase tracking-[1em] mb-2">Simulation</h3>
        <h1 class="font-bold text-5xl text-gray-800 leading-none">Obtenez les tags les plus cohérents selon votre
            contenu</h1>

        <form class="mt-10" onsubmit="event.preventDefault(); envoyer();">
            <label for="search" class="mb-2 text-sm font-medium text-gray-900 sr-only">Rechercher</label>
            <textarea id="search" rows="5"
                class="block w-full p-2 mb-2 text-gray-900 border border-gray-300 rounded-lg focus:ring-emerald-400 focus:border-emerald-400"
                placeholder="Tapez votre recherche..." value="{% if sentence %}{{ sentence }}{% endif %}"></textarea>
            <button id="searchButton" type="submit"
                class="text-white bg-emerald-400 hover:bg-emerald-500 focus:ring-4 focus:outline-none focus:ring-emerald-300 font-medium rounded-full px-4 py-3 ">Rechercher</button>

        </form>
        {% if tracker %}
        <p class="text-center mt-2 font-medium text-gray-700">Votre recherche représente <span
                class="font-bold text-emerald-400">
                {{ tracker }}</span> kg eq/CO<sub>2</sub>!</p>
        {% endif %}
        {% if content %}
        <p class="text-center mt-2 font-medium text-gray-700">{{ content }}</p>
        {% endif %}
    </div>

</section>

<script>
    const button = document.querySelector("#searchButton");
    const textBox = document.querySelector("#search");
    textBox.addEventListener("keyup", function (event) {
        if (event.keyCode == 13) {
            button.click();
        }
    });
    function envoyer() {
        const content = textBox.value
        const url = '/partage/simulation/' + content
        window.location = url
    }
</script>
{% endblock %}